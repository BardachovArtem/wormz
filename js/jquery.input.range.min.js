/*

 jQuery Tools @VERSION Rangeinput - HTML5 <input type="range" /> for humans

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/rangeinput/

 Since: Mar 2010
 Date: @DATE
*/
(function(a){function A(d,b){var a=Math.pow(10,b);return Math.round(d*a)/a}function m(d,b){var a=parseInt(d.css(b),10);return a?a:(a=d[0].currentStyle)&&a.width&&parseInt(a.width,10)}function y(a){return(a=a.data("events"))&&a.onSlide}function B(d,b){function e(a,c,f,e){f===void 0?f=c/i*u:e&&(f-=b.min);r&&(f=Math.round(f/r)*r);if(c===void 0||r)c=f*i/u;if(isNaN(f))return g;c=Math.max(0,Math.min(c,i));f=c/i*u;if(e||!q)f+=b.min;q&&(e?c=i-c:f=b.max-f);var f=A(f,s),h=a.type=="click";if(z&&j!==void 0&&
!h&&(a.type="onSlide",v.trigger(a,[f,c]),a.isDefaultPrevented()))return g;e=h?b.speed:0;h=h?function(){a.type="change";v.trigger(a,[f])}:null;q?(k.animate({top:c},e,h),b.progress&&w.animate({height:i-c+k.width()/2},e)):(k.animate({left:c},e,h),b.progress&&w.animate({width:c+k.width()/2},e));j=f;d.val(f);return g}function n(){(q=b.vertical||m(h,"height")>m(h,"width"))?(i=m(h,"height")-m(k,"height"),l=h.offset().top+i):(i=m(h,"width")-m(k,"width"),l=h.offset().left)}function p(){n();g.setValue(b.value!==
void 0?b.value:b.min)}var g=this,o=b.css,h=a("<div><div/><a href='#'/></div>").data("rangeinput",g),q,j,l,i;d.before(h);var k=h.addClass(o.slider).find("a").addClass(o.handle),w=h.find("div").addClass(o.progress);a.each("min,max,step,value".split(","),function(a,c){var f=d.attr(c);parseFloat(f)&&(b[c]=parseFloat(f,10))});var u=b.max-b.min,r=b.step=="any"?0:b.step,s=b.precision;if(s===void 0)try{s=r.toString().split(".")[1].length}catch(x){s=0}if(d.attr("type")=="range"){var t=a("<input/>");a.each("class,disabled,id,maxlength,name,readonly,required,size,style,tabindex,title,value".split(","),
function(a,c){t.attr(c,d.attr(c))});t.val(b.value);d.replaceWith(t);d=t}d.addClass(o.input);var v=a(g).add(d),z=!0;a.extend(g,{getValue:function(){return j},setValue:function(b,c){n();return e(c||a.Event("api"),void 0,b,!0)},getConf:function(){return b},getProgress:function(){return w},getHandle:function(){return k},getInput:function(){return d},step:function(d,c){c=c||a.Event();g.setValue(j+(b.step=="any"?1:b.step)*(d||1),c)},stepUp:function(a){return g.step(a||1)},stepDown:function(a){return g.step(-a||
-1)}});a.each("onSlide,change".split(","),function(d,c){a.isFunction(b[c])&&a(g).bind(c,b[c]);g[c]=function(b){b&&a(g).bind(c,b);return g}});k.drag({drag:!1}).bind("dragStart",function(){n();z=y(a(g))||y(d)}).bind("drag",function(a,b,f){if(d.is(":disabled"))return!1;e(a,q?b:f)}).bind("dragEnd",function(a){if(!a.isDefaultPrevented())a.type="change",v.trigger(a,[j])}).click(function(a){return a.preventDefault()});h.click(function(a){if(d.is(":disabled")||a.target==k[0])return a.preventDefault();n();
var b=k.width()/2;e(a,q?i-l-b+a.pageY:a.pageX-l-b)});b.keyboard&&d.keydown(function(b){if(!d.attr("readonly")){var c=b.keyCode,e=a([75,76,38,33,39]).index(c)!=-1,h=a([74,72,40,34,37]).index(c)!=-1;if((e||h)&&!b.shiftKey&&!b.altKey&&!b.ctrlKey)return e?g.step(c==33?10:1,b):h&&g.step(c==34?-10:-1,b),b.preventDefault()}});d.blur(function(b){var c=a(this).val();c!==j&&g.setValue(c,b)});a.extend(d[0],{stepUp:g.stepUp,stepDown:g.stepDown});p();i||a(window).load(p)}a.tools=a.tools||{version:"@VERSION"};
var x;x=a.tools.rangeinput={conf:{min:0,max:100,step:"any",steps:0,value:0,precision:void 0,vertical:0,keyboard:!0,progress:!1,speed:100,css:{input:"range",slider:"slider",progress:"progress",handle:"handle"}}};var p,l;a.fn.drag=function(d){d=a.extend({x:!0,y:!0,drag:!0},d);p=p||a(document).bind("mousedown mouseup",function(b){var e=a(b.target);if(b.type=="mousedown"&&e.data("drag")){var n=e.position(),m=b.pageX-n.left,g=b.pageY-n.top,o=!0;p.bind("mousemove.drag",function(a){var b=a.pageX-m,a=a.pageY-
g,j={};if(d.x)j.left=b;if(d.y)j.top=a;o&&(e.trigger("dragStart"),o=!1);d.drag&&e.css(j);e.trigger("drag",[a,b]);l=e});b.preventDefault()}else try{l&&l.trigger("dragEnd")}finally{p.unbind("mousemove.drag"),l=null}});return this.data("drag",!0)};a.expr[":"].range=function(d){var b=d.getAttribute("type");return b&&b=="range"||!!a(d).filter("input").data("rangeinput")};a.fn.rangeinput=function(d){if(this.data("rangeinput"))return this;var d=a.extend(!0,{},x.conf,d),b;this.each(function(){var e=new B(a(this),
a.extend(!0,{},d)),e=e.getInput().data("rangeinput",e);b=b?b.add(e):e});return b?b:this}})(jQuery);