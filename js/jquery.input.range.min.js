(function(a){function h(b,c){function z(){y();d.setValue(c.value!==undefined?c.value:c.min)}function y(){j=c.vertical||f(i,"height")>f(i,"width");if(j){m=f(i,"height")-f(o,"height");l=i.offset().top+m}else{m=f(i,"width")-f(o,"width");l=i.offset().left}}function x(a,f,g,h){if(g===undefined){g=f/m*q}else if(h){g-=c.min}if(r){g=Math.round(g/r)*r}if(f===undefined||r){f=g*m/q}if(isNaN(g)){return d}f=Math.max(0,Math.min(f,m));g=f/m*q;if(h||!j){g+=c.min}if(j){if(h){f=m-f}else{g=c.max-g}}g=e(g,s);var i=a.type=="click";if(w&&k!==undefined&&!i){a.type="onSlide";v.trigger(a,[g,f]);if(a.isDefaultPrevented()){return d}}var l=i?c.speed:0,t=i?function(){a.type="change";v.trigger(a,[g])}:null;if(j){o.animate({top:f},l,t);if(c.progress){p.animate({height:m-f+o.width()/2},l)}}else{o.animate({left:f},l,t);if(c.progress){p.animate({width:f+o.width()/2},l)}}k=g;n=f;b.val(g);return d}var d=this,h=c.css,i=a("<div><div/><a href='#'/></div>").data("rangeinput",d),j,k,l,m,n;b.before(i);var o=i.addClass(h.slider).find("a").addClass(h.handle),p=i.find("div").addClass(h.progress);a.each("min,max,step,value".split(","),function(a,d){var e=b.attr(d);if(parseFloat(e)){c[d]=parseFloat(e,10)}});var q=c.max-c.min,r=c.step=="any"?0:c.step,s=c.precision;if(s===undefined){try{s=r.toString().split(".")[1].length}catch(t){s=0}}if(b.attr("type")=="range"){var u=a("<input/>");a.each("class,disabled,id,maxlength,name,readonly,required,size,style,tabindex,title,value".split(","),function(a,c){u.attr(c,b.attr(c))});u.val(c.value);b.replaceWith(u);b=u}b.addClass(h.input);var v=a(d).add(b),w=true;a.extend(d,{getValue:function(){return k},setValue:function(b,c){y();return x(c||a.Event("api"),undefined,b,true)},getConf:function(){return c},getProgress:function(){return p},getHandle:function(){return o},getInput:function(){return b},step:function(b,e){e=e||a.Event();var f=c.step=="any"?1:c.step;d.setValue(k+f*(b||1),e)},stepUp:function(a){return d.step(a||1)},stepDown:function(a){return d.step(-a||-1)}});a.each("onSlide,change".split(","),function(b,e){if(a.isFunction(c[e])){a(d).bind(e,c[e])}d[e]=function(b){if(b){a(d).bind(e,b)}return d}});o.drag({drag:false}).bind("dragStart",function(){y();w=g(a(d))||g(b)}).bind("drag",function(a,c,d){if(b.is(":disabled")){return false}x(a,j?c:d)}).bind("dragEnd",function(a){if(!a.isDefaultPrevented()){a.type="change";v.trigger(a,[k])}}).click(function(a){return a.preventDefault()});i.click(function(a){if(b.is(":disabled")||a.target==o[0]){return a.preventDefault()}y();var c=o.width()/2;x(a,j?m-l-c+a.pageY:a.pageX-l-c)});if(c.keyboard){b.keydown(function(c){if(b.attr("readonly")){return}var e=c.keyCode,f=a([75,76,38,33,39]).index(e)!=-1,g=a([74,72,40,34,37]).index(e)!=-1;if((f||g)&&!(c.shiftKey||c.altKey||c.ctrlKey)){if(f){d.step(e==33?10:1,c)}else if(g){d.step(e==34?-10:-1,c)}return c.preventDefault()}})}b.blur(function(b){var c=a(this).val();if(c!==k){d.setValue(c,b)}});a.extend(b[0],{stepUp:d.stepUp,stepDown:d.stepDown});z();if(!m){a(window).load(z)}}function g(a){var b=a.data("events");return b&&b.onSlide}function f(a,b){var c=parseInt(a.css(b),10);if(c){return c}var d=a[0].currentStyle;return d&&d.width&&parseInt(d.width,10)}function e(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c}a.tools=a.tools||{version:"@VERSION"};var b;b=a.tools.rangeinput={conf:{min:0,max:100,step:"any",steps:0,value:0,precision:undefined,vertical:0,keyboard:true,progress:false,speed:100,css:{input:"range",slider:"slider",progress:"progress",handle:"handle"}}};var c,d;a.fn.drag=function(b){document.ondragstart=function(){return false};b=a.extend({x:true,y:true,drag:true},b);c=c||a(document).bind("mousedown mouseup",function(e){var f=a(e.target);if(e.type=="mousedown"&&f.data("drag")){var g=f.position(),h=e.pageX-g.left,i=e.pageY-g.top,j=true;c.bind("mousemove.drag",function(a){var c=a.pageX-h,e=a.pageY-i,g={};if(b.x){g.left=c}if(b.y){g.top=e}if(j){f.trigger("dragStart");j=false}if(b.drag){f.css(g)}f.trigger("drag",[e,c]);d=f});e.preventDefault()}else{try{if(d){d.trigger("dragEnd")}}finally{c.unbind("mousemove.drag");d=null}}});return this.data("drag",true)};a.expr[":"].range=function(b){var c=b.getAttribute("type");return c&&c=="range"||!!a(b).filter("input").data("rangeinput")};a.fn.rangeinput=function(c){if(this.data("rangeinput")){return this}c=a.extend(true,{},b.conf,c);var d;this.each(function(){var b=new h(a(this),a.extend(true,{},c));var e=b.getInput().data("rangeinput",b);d=d?d.add(e):e});return d?d:this}})(jQuery)